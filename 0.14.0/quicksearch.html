<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules opossum Classes CircuitBreakerStatus Events CircuitBreaker#event:closeCircuitBreaker#event:failureCircuitBreaker#event:fallbackCircuitBreaker#event:fireCircuitBreaker#event:halfOpenCircuitBreaker#event:openCircuitBreaker#event:rejectCircuitBreaker#event:successCircuitBreaker#event:timeout Modules Classes CircuitBreaker Status Events close Emitted when the breaker is reset allowing the action to execute again failure Emitted when the breaker action fails fallback Emitted when the breaker executes a fallback function fire Emitted when the breaker action is executed halfOpen Emitted after options.resetTimeout has elapsed, allowing for a single attempt to call the service again. If that attempt is successful, the circuit will be closed. Otherwise it remains open. open Emitted when the breaker action fails more than options.maxFailures reject Emitted when the breaker is open and failing fast success Emitted when the breaker action succeeds timeout Emitted when the breaker action takes longer than options.timeout × Search results Close Documentation generated by JSDoc 3.4.3 on 2016-12-21T15:32:17-05:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules opossum Classes CircuitBreakerStatus Events CircuitBreaker#event:closeCircuitBreaker#event:failureCircuitBreaker#event:fallbackCircuitBreaker#event:fireCircuitBreaker#event:halfOpenCircuitBreaker#event:openCircuitBreaker#event:rejectCircuitBreaker#event:successCircuitBreaker#event:timeout Classes Classes CircuitBreaker Status Events close Emitted when the breaker is reset allowing the action to execute again failure Emitted when the breaker action fails fallback Emitted when the breaker executes a fallback function fire Emitted when the breaker action is executed halfOpen Emitted after options.resetTimeout has elapsed, allowing for a single attempt to call the service again. If that attempt is successful, the circuit will be closed. Otherwise it remains open. open Emitted when the breaker action fails more than options.maxFailures reject Emitted when the breaker is open and failing fast success Emitted when the breaker action succeeds timeout Emitted when the breaker action takes longer than options.timeout × Search results Close Documentation generated by JSDoc 3.4.3 on 2016-12-21T15:32:17-05:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules opossum Classes CircuitBreakerStatus Events CircuitBreaker#event:closeCircuitBreaker#event:failureCircuitBreaker#event:fallbackCircuitBreaker#event:fireCircuitBreaker#event:halfOpenCircuitBreaker#event:openCircuitBreaker#event:rejectCircuitBreaker#event:successCircuitBreaker#event:timeout opossum Opossum is a Node.js circuit breaker that executes asynchronous functions and monitors their execution status. When things start failing, opossum plays dead and fails fast. If you want, you can provide a fallback function to be executed when in the failure state. For more about the circuit breaker pattern, there are lots of resources on the web - search it! Here is one place to start reading. Project Info License: Apache-2.0 Build: make Documentation: https://bucharest-gold.github.io/opossum/ Issue tracker: https://github.com/bucharest-gold/opossum/issues Engines: Node.js 4.x, 5.x, 6.x UsageLet's say you've got an API that depends on something that might fail - a network operation, or disk read, for example. Wrap that puppy up in a CircuitBreaker and you have control over your destiny. const circuitBreaker = require('opossum'); function asyncFunctionThatCouldFail (x, y) { return new Promise((resolve, reject) =&gt; { // Do something, maybe on the network or a disk }); } const options = { timeout: 3000, // If our function takes longer than 3 seconds, trigger a failure maxFailures: 5, // Once we fail this many times in a row, start failing fast resetTimeout: 30000 // After 30 seconds, try again. }; const breaker = circuitBreaker(asyncFunctionThatCouldFail, options); breaker.fire('foo', 'bar') .then((result) =&gt; console.log(result)) .catch(console.error);You could also provide a fallback function that will be executed instead of indicating failure. After the resetTimeout expires, opossum will try the circuit again. const breaker = circuitBreaker(asyncFunctionThatCouldFail, options); // if asyncFunctionThatCouldFail starts to fail, firing the breaker // will trigger our fallback function breaker.fallback(() =&gt; 'Sorry, out of service right now');When a fallback function is triggered, it's considered a failure, and the fallback function will continue to be executed until the breaker is closed, after the resetTimeout has expired. Promises vs. CallbacksThe opossum API uses a Promise as a return value for a breaker that has been fired. But your circuit action - the async function that might fail - doesn't have to return a promise. Check this out. const fs = require('fs'); const circuitBreaker = require('opossum'); const readFile = circuitBreaker.promisify(fs.readFile); const breaker = circuitBreaker(readFile, options); breaker.fire('./package.json', 'utf-8') .then(console.log) .catch(console.error);Now, you've got easy monitoring of all those Node.js I/O bount functions. How do you deal with that? Easy, my friend - just promisify it. And just for fun, your circuit doesn't even really have to be a function. Not sure when you'd use this - but you could if you wanted to. const breaker = circuitBreaker('foo', options); breaker.fire() .then((result) =&gt; console.log(result)) // logs 'foo' .catch(console.error);Promise InteroperabilityThe Promise implementation used in opossum is compliant with both the ES6 Promise API as well as the promises/A+ API. This means that it doesn't matter what flavor of promise your API uses, opossum should work fine with them. If you would like to control what Promise implementation used in opossum, provide a Promise constructor function in your options when you create the breaker. E.g. // Force to use native JS promises const breaker = circuitBreaker(readFile, { Promise: Promise });EventsA CircuitBreaker will emit events for important things that occur. Here are the events you can listen for. fire (or execute) - emitted when the breaker is fired. reject - emitted when the breaker is open (or halfOpen). timeout - emitted when the breaker action times out. success - emitted when the breaker action completes successfully failure - emitted when the breaker action fails, called with the error open - emitted when the breaker state changes to open close - emitted when the breaker state changes to closed halfOpen - emitted when the breaker state changes to halfOpen fallback - emitted when the breaker has a fallback function and executes it DevelopmentContributions to Opossum are welcome! When contributing, be sure that you've added a test for any code changes you've made, and that make test passes. Releasing Make sure everything works: make clean &amp;&amp; npm install &amp;&amp; make ci Run standard-version: npm run release Push to GitHub: git push --follow-tags origin master Publish to npmjs.com: npm publish Assuming all goes well, head over to https://github.com/bucharest-gold/opossum/releases and update the release with any relevant notes. The generated CHANGELOG.md file should be updated, so you can use it to document release changes. Tweet, blog and otherwise promote your awesome success! × Search results Close Documentation generated by JSDoc 3.4.3 on 2016-12-21T15:32:17-05:00 using the DocStrap template. "},"CircuitBreaker.html":{"id":"CircuitBreaker.html","title":"Class: CircuitBreaker","body":" Documentation Modules opossum Classes CircuitBreakerStatus Events CircuitBreaker#event:closeCircuitBreaker#event:failureCircuitBreaker#event:fallbackCircuitBreaker#event:fireCircuitBreaker#event:halfOpenCircuitBreaker#event:openCircuitBreaker#event:rejectCircuitBreaker#event:successCircuitBreaker#event:timeout Class: CircuitBreaker CircuitBreaker new CircuitBreaker(action, options) Parameters: Name Type Description action function The action to fire for this CircuitBreaker instance options Object Options for the CircuitBreaker. There are **no default options** when you use the contructor directly. You must supply values for each of these. Properties Name Type Description timeout number The time in milliseconds that action should be allowed to execute before timing out. maxFailures The number of times the circuit can fail before opening. resetTimeout The time in milliseconds to wait before setting the breaker to `halfOpen` state, and trying the action again. Fires: CircuitBreaker#event:halfOpen Extends EventEmitter Members closed True if the circuit is currently closed. False otherwise. halfOpen True if the circuit is currently half opened. False otherwise. opened True if the circuit is currently opened. False otherwise. status The current Status of this CircuitBreaker Methods close() Closes the breaker, allowing the action to execute again Fires: CircuitBreaker#event:close fallback(func) Provide a fallback function for this CircuitBreaker. This function will be executed when the breaker opens, instead of returning a rejected Promise. Parameters: Name Type Description func function the fallback function to execute when the breaker has opened or when a timeout or error occurs. Returns: CircuitBreaker this fire() Execute the action for this circuit. If the action fails or times out, the returned promise will be rejected. If the action succeeds, the promise will resolve with the resolved value from action. Fires: CircuitBreaker#event:failure CircuitBreaker#event:fallback CircuitBreaker#event:fire CircuitBreaker#event:reject CircuitBreaker#event:success CircuitBreaker#event:timeout Returns: Promise a Promise that resolves on success and is rejected on failure of the action. open() Opens the breaker, returning a failed Promise each time the breaker is fired, or falling back to any fallback function that has been provided. Fires: CircuitBreaker#event:open Events close Emitted when the breaker is reset allowing the action to execute again failure Emitted when the breaker action fails fallback Emitted when the breaker executes a fallback function fire Emitted when the breaker action is executed halfOpen Emitted after options.resetTimeout has elapsed, allowing for a single attempt to call the service again. If that attempt is successful, the circuit will be closed. Otherwise it remains open. open Emitted when the breaker action fails more than options.maxFailures reject Emitted when the breaker is open and failing fast success Emitted when the breaker action succeeds timeout Emitted when the breaker action takes longer than options.timeout × Search results Close Documentation generated by JSDoc 3.4.3 on 2016-12-21T15:32:17-05:00 using the DocStrap template. "},"module-opossum.html":{"id":"module-opossum.html","title":"Module: opossum","body":" Documentation Modules opossum Classes CircuitBreakerStatus Events CircuitBreaker#event:closeCircuitBreaker#event:failureCircuitBreaker#event:fallbackCircuitBreaker#event:fireCircuitBreaker#event:halfOpenCircuitBreaker#event:openCircuitBreaker#event:rejectCircuitBreaker#event:successCircuitBreaker#event:timeout Module: opossum Methods &lt;inner&gt; circuitBreaker(action, options) Creates a CircuitBreaker instance capable of executing `action`. Parameters: Name Type Description action function The action to fire for this CircuitBreaker instance options Object Options for the CircuitBreaker Properties Name Type Description timeout number The time in milliseconds that action should be allowed to execute before timing out. Default 10000 (10 seconds) maxFailures The number of times the circuit can fail before opening. Default 10. resetTimeout The time in milliseconds to wait before setting the breaker to `halfOpen` state, and trying the action again. Promise Promise Opossum uses Fidelity promises, but works fine with any Promise that follows the spec. You can specify your favored implementation by providing the constructor as an option. Returns: a CircuitBreaker instance &lt;inner&gt; promisify(action) Given a function that receives a callback as its last argument, and which executes that function, passing as parameters `err` and `result`, creates an action that returns a promise which resolves when the function's callback is executed. Parameters: Name Type Description action function A Node.js-like asynchronous function Returns: The `action` wrapped in a promise API. Example const fs = require('fs'); const readFilePromised = circuitBreaker.promisify(fs.readFile); const breaker = circuitBreaker(readFilePromised); × Search results Close Documentation generated by JSDoc 3.4.3 on 2016-12-21T15:32:17-05:00 using the DocStrap template. "},"Status.html":{"id":"Status.html","title":"Class: Status","body":" Documentation Modules opossum Classes CircuitBreakerStatus Events CircuitBreaker#event:closeCircuitBreaker#event:failureCircuitBreaker#event:fallbackCircuitBreaker#event:fireCircuitBreaker#event:halfOpenCircuitBreaker#event:openCircuitBreaker#event:rejectCircuitBreaker#event:successCircuitBreaker#event:timeout Class: Status Status Tracks execution status for a given CircuitBreaker new Status(circuit) Parameters: Name Type Description circuit CircuitBreaker the CircuitBreaker to track status for Members failures The number of times the breaker's action has failed fallbacks The number of times a fallback function has been executed fires The number of times this circuit breaker has been fired rejects The number of times this breaker been rejected because it was fired, but in the open state. successes The number of times the action for this breaker executed successfully timeouts The number of times this circuit breaker has timed out × Search results Close Documentation generated by JSDoc 3.4.3 on 2016-12-21T15:32:17-05:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
